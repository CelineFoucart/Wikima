{% if articles is not defined %}
	{% set articles = false %}
{% endif %}
{% if images is not defined %}
	{% set images = false %}
{% endif %}
{% if persons is not defined %}
	{% set persons = false %}
{% endif %}
{% if timelines is not defined %}
	{% set timelines = false %}
{% endif %}

<header class="pt-4 bg-item header-item">
	<div class="container-fluid">
		<div class="row border-bottom pb-4 pb-md-3 align-items-center">
			<div class="col-md-6">
				<nav aria-label="breadcrumb">
					<ol class="breadcrumb">
						<li class="breadcrumb-item">
							<a href="{{ path('app_home') }}">Accueil</a>
						</li>
						<li class="breadcrumb-item">
							<a href="{{ path('app_portal_index') }}">Portails</a>
						</li>
						<li class="breadcrumb-item active" aria-current="page">{{ portal.title|capitalize }}</li>
					</ol>
				</nav>
			</div>
			<div class="col-md-6">{{ include('includes/_search.html.twig') }}</div>
		</div>
		<div class="item-heading position-relative">
			<div class="p-2 position-absolute top-0" style="right:-10px">
				<div class="dropdown">
					<button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false" title="outils">
						<i class="bi bi-wrench-adjustable me-1"></i>
					</button>
					<ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
						<li>
							<a class="dropdown-item" href="{{ path('app_print_portal', {slug: portal.slug}) }}" target="_blank">Aperçu avant impression</a>
						</li>
						{% if is_granted('ROLE_ADMIN') %}
							<li>
								<a class="dropdown-item" href="{{ path('admin_app_portal_edit', {id:portal.id}) }}">
									Gérer
								</a>
							</li>
							<a class="dropdown-item" href="{{ path('admin_app_article_create', {portal:portal.id}) }}">
								Ajouter un article
							</a>
						{% endif %}
					</ul>
				</div>
			</div>
			<p style="width:90%">
				{% for category in portal.categories %}
					<a href="{{ path('app_category_show', {slug: category.slug}) }}" class="label mx-1" data-bs-toggle="tooltip" title="{{ category.description ? category.description : 'Aucune description' }}">
						<i class="bi bi-folder-fill me-1"></i>
						{{ category.title }}
					</a>
				{% endfor %}
			</p>
			<h1 class="mb-3">{{ portal.title|capitalize }}</h1>
			<p class="lead mb-1 text-center">{{ portal.description }}</p>
		</div>
	</div>

	<nav class="tab-default mt-3">
		<div class="item {{ articles ? 'active': '' }}">
			<a href="{{ path('app_portal_show', {slug:portal.slug}) }}">
				Articles
			</a>
		</div>
		<div class="item {{ persons ? 'active': '' }}">
			<a href="{{ path('app_portal_persons', {slug:portal.slug}) }}">
				Personnages
			</a>
		</div>
		<div class="item {{ timelines ? 'active': '' }}">
			<a href="{{ path('app_portal_timelines', {slug:portal.slug}) }}">
				Chronologie
			</a>
		</div>
		<div class="item {{ images ? 'active': '' }}">
			<a href="{{ path('app_portal_gallery', {slug:portal.slug}) }}">
				Galerie
			</a>
		</div>
	</nav>
</header>

{% if portal.banner %}
	<img src="{{ vich_uploader_asset(portal) }}" class="img-fluid" alt="bannière de {{ portal.title }}">
{% endif %}

	<p class="text-end mb-4 mt-1">
		{% for page in portal.pages %}
			<a href="{{ path('app_page', {slug: page.slug}) }}" class="label mx-1">
				<i class="bi bi-file-earmark-text"></i>
				{{ page.title }}
			</a>
		{% endfor %}
	</p>

{% if portal.presentation %}
	<div class="element-presentation">
		<h2><strong>{{ portal.title }}</strong>, qu'est-ce que c'est ?</h2>
		<div class="content">
			{{ portal.presentation|raw }}
		</div>
	</div>
{% endif %}


