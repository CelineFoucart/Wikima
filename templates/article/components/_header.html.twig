{% if comments is not defined %}
	{% set comments = false %}
{% endif %}
{% if reading is not defined %}
	{% set reading = false %}
{% endif %}

<div class="container-fluid">
	<div class="border-bottom pb-3 pb-md-2">
		<span class="label-title">Portails :
		</span>
		{% for portal in article.portals %}
			{{ include('components/utils/_tag_link.html.twig', {item: portal, path: 'app_portal_show', position: "bottom"}) }}
		{% endfor %}
	</div>
	<div class="item-heading position-relative">
		<div class="p-2 position-absolute top-0" style="right:-10px">
			<div class="dropdown">
				<button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false" title="outils">
					<i class="bi bi-wrench-adjustable me-1"></i>
				</button>
				<ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
					<li>
						<a class="dropdown-item" href="{{ path('app_print_article', {slug: article.slug}) }}" target="_blank">Aperçu avant impression</a>
					</li>
					{% if (is_granted('ROLE_EDITOR') and article.author is not null and article.author.id == app.user.id) 
						or is_granted('ROLE_ADMIN') %}
						<li>
							<a class="dropdown-item" href="{{ path('admin_app_article_section', {id:article.id}) }}">
								Gérer
							</a>
						</li>
					{% endif %}
				</ul>
			</div>
		</div>
		<h1 class="mb-1">{{ article.title|capitalize }}
			{% if article.isDraft %}
				<i class="bi bi-rulers" data-bs-toggle="tooltip" title="Brouillon : article en travaux (visible uniquement par son auteur et les administrateurs)"></i>
			{% endif %}
			{% if article.isPrivate %}
				<i class="bi bi-file-lock" data-bs-toggle="tooltip" title="Privé (visible uniquement par son auteur et les administrateurs)"></i>
			{% endif %}
		</h1>
		<p class="text-muted mb-3 mt-2">
			<span class="me-3">
				<i class="bi bi-person-fill me-1"></i>
				{% if article.author is not null %}
					Par
					{{ article.author.username }}
				{% else %}
					Par Anonyme
				{% endif %}
			</span>
			<span class="me-2">
				<i class="bi bi-calendar3 me-1"></i>
				Le
				{{ article.createdAt|date('d/m/Y') }}
			</span>
		</p>
		<p class="lead mb-3">{{ article.description }}</p>
	</div>

	<ul class="nav nav-tabs border-bottom-0">
		<li class="nav-item">
			<a class="nav-link {{ reading ? 'active': '' }}" href="{{ path('app_article_show', {slug:article.slug}) }}">
				Lecture
			</a>
		</li>
		<li class="nav-item">
			<a class="nav-link {{ comments ? 'active': '' }}" href="{{ path('app_comment', {slug:article.slug}) }}">
				Commentaires
			</a>
		</li>
	</ul>
</div>
